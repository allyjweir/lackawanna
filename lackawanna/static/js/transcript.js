// Generated by CoffeeScript 1.8.0

jQuery(function($) {
    $.ajaxSetup({
        headers: {
            'X-CSRFToken': $.cookie('csrftoken')
        }
    });
    var transcript = $("#transcript").annotator();

    // Setup the Store plugin. Deals with retrieval and storage of annotations
    transcript.annotator('addPlugin', 'Store', {
        // Define the URLs for actions related to annotations
        urls: {
            create: '/annotations/',
            update: '/annotations/:id',
            destroy: '/annotations/:id',
            search: '/annotations/'
        },

        prefix: '/apiv1',

        // Affix the pathname (i.e. '/datapoint/5' or '/transcript/2' to allow for specified retrieval later)
        annotationData: {
            'uri': window.location.pathname,
            'datapoint': $('#datapoint-pk').text()
        },

        loadFromSearch: {
            'uri': window.location.pathname
        }
    });
});
